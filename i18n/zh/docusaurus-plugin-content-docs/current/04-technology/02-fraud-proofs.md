# 欺诈证明（Fraud Proofs）

欺诈证明是 Layer2 项目保证安全的最关键一环。只有实现了欺诈证明，保证 Layer2 上的作弊行为可以在仲裁层得到惩罚，我们才能保证用户的资产安全。

![modular](/diagram/rooch-omo.svg)

Rooch 基于 [OMO](https://github.com/starcoinorg/omo) 提供了链上交互式仲裁的能力。

## OMO

OMO 是一个拥有单步状态证明能力的通用字节码模拟器：

1. 为多链执行环境设计：拥有丰富的指令与系统调用实现。
2. 多平台支持：对 CPU 与操作系统进行了抽象。
3. 清晰准确的单步状态证明通用方案：拥有进程指令级别的运行状态。

## 交互式仲裁

假设某个区块执行共需要 `N` 步。控辩双方先提供各自最终执行（即第 `N` 步）后的状态证明，如果法官发现结果不一致，可以要求双方再提供第 `N/2` 步的状态证明。
此时的结果如果一致，则说明出现分歧的地方在第 `N/2` 步和第 `N` 步之间，法官可以要接双方提供第 `(N/2 + N) / 2` 步的证据；
如果结果不一致，则说明出现分歧的地方在第 `0` 步和第 `N/2` 步之间，法官可以要接双方提供第 `(N/2) / 2` 步的证据。
如此多轮交互，法官不断的对比双方提交的证据，直到找到了双方在某一步（比如 `m`）上的证据出现了分歧（双方的中间状态证明不一致）。

此时，控辩双方已经对上一步（`m-1`）的中间状态证明达成共识，法官只需要基于 `m-1` 步的状态执行第 `m` 步，然后将生成的状态证明与控辩双方提供的证明做对比，既可判断哪一方提交的证据是对的。

[OMO 文档](https://github.com/starcoinorg/omo/blob/main/docs/guidelines.md)