# Introduce Rooch MoveOS part 1

## Where does Rooch MoveOS come from (Rooch MoveOS ä»å“ªé‡Œæ¥)

### åŒºå—é“¾çš„æ¼”è¿›

åŒºå—é“¾è¡Œä¸šç»è¿‡10å¤šå¹´çš„ç”Ÿæ€å‘å±•ï¼Œä»æ¯”ç‰¹å¸çš„å…´èµ·å’Œä»¥å¤ªåŠçš„æµè¡Œï¼Œä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒçš„æŠ€æœ¯å¼•å‘äº† crypto ç”Ÿæ€çš„çˆ†å‘ï¼Œå„ç§é‡‘èç±»æ•°å­—åº”ç”¨å’Œèµ„äº§å·²ç»åœ¨åŠ å¯†è´§å¸å’Œå»ä¸­å¿ƒåŒ–é‡‘èç­‰æ–¹é¢å–å¾—é•¿è¶³çš„è¿›æ­¥ï¼Œç›®å‰åŒºå—é“¾è¿›å…¥ç¨³å®šå‘å±•é˜¶æ®µï¼Œcryptoç±»ä¼¼ä¼ ç»Ÿçš„é‡‘èä¸šï¼Œå·²ç»ç§¯ç´¯äº†éå¸¸å¥½çš„åŸºç¡€ï¼Œç›®å‰åŒºå—é“¾æœ‰å‘æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯å‘å±•ï¼ŒWeb3 å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œè¦æ»¡è¶³10äº¿çº§ä»¥ä¸Šç”¨æˆ·ï¼Œæµ·é‡çš„dAppï¼Œèƒ½å¿«é€Ÿå“åº”å’Œé«˜æ€§èƒ½ï¼Œæ¥è¿‘ Web2 çš„ä½“éªŒç­‰ã€‚

å½“å‰çš„ä¸»è¦å…¬é“¾éƒ½å­˜åœ¨ä¸å¯èƒ½ä¸‰è§’éš¾é¢˜(å»ä¸­å¿ƒåŒ–ï¼Œå®‰å…¨æ€§ï¼Œå¯æ‰©å±•æ€§)çš„å›°æ‰°ï¼Œå¯¼è‡´äº†ç½‘ç»œæ‹¥å µï¼Œæ¨é«˜äº†äº¤æ˜“æˆæœ¬ã€‚ä¸ºäº†é€‚åº”åŒºå—é“¾ç”± crypto å‘ Web3 çš„æ¼”è¿›ï¼Œåœ¨å…¬é“¾æˆä¸ºæä¾›äº¤æ˜“æœ€ç»ˆç¡®å®šæ€§ã€ç»“ç®—èƒ½åŠ›ï¼Œå®‰å…¨æ€§ä¿è¯çš„ Layer1 å±‚ï¼Œå¹¶åœ¨ Layer1 åŸºç¡€ä¸Šæ„å»ºæ€§èƒ½å’Œæ‰©å±•æ€§æ›´å¥½çš„ Rollup Layer2 å±‚(Arbitrumã€Optimismã€Starknetç­‰)ï¼ŒRollup Layer2 æä¾›æ›´é«˜çš„æ€§èƒ½å’Œæ‰©å±•æ€§æ¥æ»¡è¶³ Web3 çš„éœ€è¦ï¼Œæœ€ç»ˆæ¼”å˜äº†å½“ä¸‹æµè¡Œçš„æ¨¡å—åŒ–åŒºå—é“¾æ¶æ„ã€‚

![https://docs.celestia.org/assets/images/monolithic-modular-c078dd91fd68b8e6a168ca8bbccfd3d8.png](https://docs.celestia.org/assets/images/monolithic-modular-c078dd91fd68b8e6a168ca8bbccfd3d8.png)

å›¾ç‰‡æ¥æº: [https://docs.celestia.org/assets/images/monolithic-modular-c078dd91fd68b8e6a168ca8bbccfd3d8.png](https://docs.celestia.org/assets/images/monolithic-modular-c078dd91fd68b8e6a168ca8bbccfd3d8.png)

è€Œ Rooch åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼Œç»“åˆ web2 é«˜æ€§èƒ½å’Œæ‰©å±•æ€§çš„æœ€ä½³å®è·µï¼Œæ›´ç»†ç²’åº¦çš„æœåŠ¡åŒ–æ–¹å¼åˆ†æˆï¼šæ‰§è¡Œå±‚ï¼Œæ¨¡å—ä»“åº“å±‚ï¼Œæ•°æ®å¯ç”¨å±‚ï¼Œå…±è¯†å±‚ï¼Œç»“ç®—å±‚ï¼Œä»²è£å±‚å’Œé“¾é—´é€šè®¯å±‚ï¼Œå¹¶ä»¥ Move ä¸ºæ ¸å¿ƒæ„å»ºçš„é«˜æ€§èƒ½ Rollup layer2 ï¼Œæœ‰å…³ Rooch è¯¦æƒ…è¯·çœ‹ ğŸ“ƒ[Rooch æŠ€æœ¯æ¶æ„](https://rooch.network/zh/docs/technology/) å’Œ ğŸ“ƒ[Rooch Rollup Layer2 çš„æ¨¡å—åŒ–æ¼”è¿›ä¹‹è·¯](https://rooch.network/zh/blog/2023/2/14/The-Modular-Evolution-of-Rollup-Layer2/) ï¼ŒRooch æ¶æ„å›¾å¦‚ä¸‹ã€‚

![https://rooch.network/zh/assets/images/rooch-modular-3f38e8dda5bf6149dd1fad2c713aae0f.svg](https://rooch.network/zh/assets/images/rooch-modular-3f38e8dda5bf6149dd1fad2c713aae0f.svg)

## What is MoveOS (MoveOS æ˜¯ä»€ä¹ˆ)

### MoveOS æ˜¯ Rooch çš„æ ¸å¿ƒä¹‹ä¸€

Rooch ä½œä¸ºä¸»æ‰“å®‰å…¨ï¼Œé«˜æ€§èƒ½ï¼Œå¯æ‰©å±•çš„ Rollup Execution Layerï¼Œåˆçº¦æ‰§è¡Œèƒ½åŠ›æ˜¯æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæ‰§è¡Œçš„æ ¸å¿ƒå°±æ˜¯ MoveOS, å®ƒåŒ…å« OMO, MoveVM ä»¥åŠ StateDBï¼Œæ˜¯ç³»ç»Ÿçš„æ‰§è¡Œä»¥åŠçŠ¶æ€å­˜å‚¨å¼•æ“ã€‚StateDB ç”±ä¸¤å±‚ç¨€ç–é»˜å…‹å°”æ ‘æ„å»ºï¼Œå¯ä»¥æä¾›çŠ¶æ€è¯æ˜ï¼ŒçŠ¶æ€æ ‘ä»¥åŠçŠ¶æ€è¯æ˜æ˜¯ Rollup åº”ç”¨ä¸å¯æˆ–ç¼ºçš„ç»„ä»¶ã€‚

MoveOS æ˜¯åŸºäº MoveVM å¼€å‘çš„ Move æ‰§è¡Œç¯å¢ƒï¼Œç›®çš„æ˜¯å±è”½ä¸åŒçš„ Move Layer1 ä¹‹é—´çš„é€‚é…å±‚çš„å·®å¼‚ï¼Œå¯¹ Move dApp ä¾›ç»Ÿä¸€çš„ Move è¿è¡Œç¯å¢ƒï¼Œæ–¹ä¾¿å¼€å‘è€…å°† MoveVM é›†æˆåˆ°ä¸åŒçš„åº”ç”¨ä¸­ï¼ŒåŒæ—¶ï¼Œå®ƒè¿˜ä¼šé›†æˆ ğŸ”–[æ¬ºè¯ˆè¯æ˜](https://rooch.network/zh/docs/technology/fraud-proofs) æ–¹æ¡ˆï¼Œæ–¹ä¾¿å¼€å‘è€…åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸­ä½¿ç”¨æ¬ºè¯ˆè¯æ˜æœºåˆ¶æ¥ä¿è¯å®‰ã€‚

![https://rooch.network/zh/assets/images/rooch-architecture-9414770217ec12ad7cc101673861c921.svg](https://rooch.network/zh/assets/images/rooch-architecture-9414770217ec12ad7cc101673861c921.svg)

### MoveOS çš„ä¼˜ç‚¹

MoveOSçš„åº•å±‚ä½¿ç”¨Moveè¯­è¨€åŠMoveVMï¼ŒMove è¯­è¨€çš„ç‰¹æ€§å°¤å…¶é€‚åˆå¯¹èµ„äº§ç±»è¿›è¡Œç¼–ç¨‹ï¼š

- èµ„äº§æ˜¯ä¸€ç­‰å…¬æ°‘
- å®‰å…¨æ€§
- å¯éªŒè¯
- æ˜“ç”¨æ€§

MoveOS åœ¨å……åˆ†åˆ©ç”¨ Move å’Œ MoveVM ç‰¹æ€§çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ‰©å±•ï¼Œç›®æ ‡æ˜¯æ‰“é€ Web3æ—¶ä»£çš„é€šç”¨æ™ºèƒ½åˆçº¦å¼€å‘è¯­è¨€å’Œè¿è¡Œæ—¶ã€‚

### MoveOS Features

> OMO
> OMOæ˜¯ä¸€ä¸ªæ‹¥æœ‰å•æ­¥çŠ¶æ€è¯æ˜èƒ½åŠ›çš„é€šç”¨å­—èŠ‚ç æ¨¡æ‹Ÿå™¨ï¼Œä¸ºå¤šé“¾æ‰§è¡Œç¯å¢ƒè®¾è®¡ã€‚æœ‰äº† OMO çš„æ”¯æŒï¼Œå¯ä»¥å®ç°ä»²è£å±‚çš„æ¨¡å—åŒ–ã€‚ä»»æ„æ”¯æŒå›¾çµå®Œå¤‡åˆçº¦çš„é“¾ï¼Œéƒ½å¯ä»¥åœ¨åˆçº¦ä¸­æ¨¡æ‹Ÿ OMO çš„æŒ‡ä»¤ï¼Œä½œä¸ºä»²è£å±‚ï¼š
> 
1.  ä¸ºå¤šé“¾æ‰§è¡Œç¯å¢ƒè®¾è®¡ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æŒ‡ä»¤ä¸ç³»ç»Ÿè°ƒç”¨å®ç°ã€‚
2. å¤šå¹³å°æ”¯æŒï¼šå¯¹ CPU ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº†æŠ½è±¡ã€‚
3. æ¸…æ™°å‡†ç¡®çš„å•æ­¥çŠ¶æ€è¯æ˜é€šç”¨æ–¹æ¡ˆï¼šæ‹¥æœ‰è¿›ç¨‹æŒ‡ä»¤çº§åˆ«çš„è¿è¡ŒçŠ¶æ€ã€‚

OMO ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªå…³é”®ç»„ä»¶ï¼š

- Loader: cåŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ã€‚
- CPU Emulator: åœ¨å®¿ä¸»æœºä¸Šæ¨¡æ‹Ÿæ‰§è¡ŒæŒ‡ä»¤ã€‚
- Registers and Stack: å¯„å­˜å™¨ä¸æ ˆæ¨¡æ‹Ÿã€‚
- OS Interface: åœ¨å®¿ä¸»æœºä¸Šæ¨¡æ‹Ÿæ‰§è¡Œç³»ç»Ÿè°ƒç”¨

![https://github.com/rooch-network/omo/raw/main/docs/imgs/arch.png](https://github.com/rooch-network/omo/raw/main/docs/imgs/arch.png)

è¯¦æƒ…è¯·æŸ¥çœ‹ï¼š[OMOÂ æ–‡æ¡£](https://github.com/rooch-network/omo/blob/main/docs/guidelines.md)

> MoveVM
> ä¸ºäº†æ›´å¥½è¾¾æˆMove è¯­è¨€ä½œä¸ºåŒºå—é“¾æ™ºèƒ½åˆçº¦æ ‡å‡†è¯­è¨€ï¼ŒMoveVMä¹Ÿåœ¨æ ¹æœ¬ä¸Šè®¾è®¡ä¸ºä¸€ä¸ªå¯åµŒå…¥çš„è¿è¡Œæ—¶ï¼Œæ›´æ–¹ä¾¿é›†æˆçš„åŒæ—¶ï¼Œä¹Ÿä»å®‰å…¨æ€§å’Œé«˜æ€§èƒ½è¿›è¡Œè®¾è®¡ã€‚Move è¯­è¨€é‡‡ç”¨çš„å¯æ‰§è¡Œæ ¼å¼æ˜¯ä¸€ç§ç±»å‹åŒ–çš„å­—èŠ‚ç ï¼Œå®ƒæ¯”æ±‡ç¼–é«˜çº§ï¼Œä½†æ¯”æºè¯­è¨€ä½ï¼Œä¿ç•™å¤§é‡æºä»£ç ç±»å‹ä¿¡æ¯çš„æ ¼å¼ï¼ŒåŒæ—¶é…åˆå†…ç½®çš„å®‰å…¨ç®—æ³•å’Œå­—èŠ‚ç éªŒè¯å™¨æ¥ä¿è¯ä»£ç æ­£ç¡®æ€§ï¼Œç¡®ä¿æ¯ä¸ªModuleæ˜¯å®‰å…¨å¯ä¿¡çš„ï¼š
> 
- èµ„æºå®‰å…¨
- å†…å­˜å®‰å…¨
- ç±»å‹å®‰å…¨
- å¹¶è¡Œèƒ½åŠ›

è¯¦æƒ…è¯·å‚çœ‹: Move è¯­è¨€æ–‡æ¡£åŠ MoveVM è§„èŒƒ

[Move language](https://github.com/move-language/move/tree/main/language)

[MoveVM Specification](https://github.com/move-language/move/blob/main/language/documentation/spec/vm.md)

> StateDB
> 
> 
> MoveOS ä¸­çš„ StateDB (çŠ¶æ€å­˜å‚¨)ä¸»è¦ä½¿ç”¨ Sparse Merkle Tree(ç®€ç§°SMT)æŠ€æœ¯ä¸ºåŸºç¡€ï¼Œé€šè¿‡ä¸¤å±‚SMTç»“æ„å¯¹çŠ¶æ€æ•°æ®è¿›è¡Œç»„ç»‡ï¼Œåœ¨å¢åŠ æå°å¯»å€æ—¶é—´çš„æƒ…å†µä¸‹ï¼Œæå¤§çš„æé«˜å­˜å‚¨ç©ºé—´å’ŒçŠ¶æ€è¯æ˜ï¼Œè¾ƒå¥½çš„è§£å†³çŠ¶æ€çˆ†ç‚¸ã€‚
> 
> SMT æ˜¯åœ¨ Merkle Tree åœ¨çš„å˜ä½“ï¼ŒSMT æ˜¯ä¸€é¢—é¢„å®šå¤§å°çš„Merkle treeï¼Œèƒ½å¿«é€Ÿè¯†åˆ«æ•°æ®å˜æ›´å’Œè¯æ˜çš„åŸºç¡€ä¸Šï¼Œä¹Ÿå¯ä»¥æä¾›ä¸å­˜åœ¨è¯æ˜(proof of non-inclusion)ï¼ŒåŒæ—¶é€šè¿‡è®¾ç½®é»˜è®¤å€¼çš„æ–¹å¼è§£å†³å ç”¨å¤§é‡å®¹é‡çš„é—®é¢˜ï¼Œå³ä½¿ Ethereum ä¸­ 2Â¹â¶â° çš„æµ·é‡è´¦æˆ·ä¹Ÿå¯ä»¥ä¿å­˜åœ¨ SMT ä¸­ã€‚
> 

SMT å‚è€ƒèµ„æ–™å’Œä»£ç å®ç°ï¼š

[Sparse Merkle Tree Introduction](https://medium.com/newcryptoblock/sparse-merkle-tree-introduction-a267f3a29223)

[Diem paper](https://diem-developers-components.netlify.app/papers/the-diem-blockchain/2020-05-26.pdf)

[Diem SMT implement](https://github.com/diem/diem/tree/latest/storage/jellyfish-merkle)

## MoveOS æ€»ç»“å±•æœ›

Move OS ä½œä¸º Rooch çš„æ‰§è¡Œå±‚çš„æ ¸å¿ƒï¼Œå…·æœ‰å®‰å…¨ã€é«˜æ•ˆï¼Œèµ„äº§äº²å’Œï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œçµæ´»æ˜“ç”¨çš„ç‰¹ç‚¹ï¼Œä¸ä»…ä»…èƒ½åº”ç”¨ä¹Ÿ Rooch ç½‘ç»œä¸­ï¼Œä¹Ÿèƒ½å½“æˆä¸€ä¸ªç‹¬ç«‹æ‰§è¡Œç»„ä»¶å’Œå…¶ä»– Rollup layer2ï¼ŒLayer3 æˆ– Layer1 ç»“åˆï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹3ç§æ–¹å¼è¿›è¡Œé›†æˆï¼š

1.  Rollup Layer2 å±‚æ¨¡å—åŠŸèƒ½ æˆ– Layer1 é“¾ä¸­ç›´æ¥é›†æˆ MoveOS åŠŸèƒ½(éœ€è¦ Rust ç¯å¢ƒ)ã€‚
2.  MoveOS ç¼–è¯‘æˆ WebAssembly ï¼Œå†ä¸ Rollup Layer2 æˆ– Layer1 äº¤äº’ã€‚
3. MoveOS åšæˆç‹¬ç«‹çš„GRPCæœåŠ¡ï¼ŒRollup Layer2 æˆ– Layer1 é€šè¿‡ GRPC æ¥å£é€šè®¯ã€‚